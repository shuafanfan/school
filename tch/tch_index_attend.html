<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>学生考勤</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/light7.min.css">
    <link rel="stylesheet" href="css/light7-swiper.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="./css/common.css">
</head>

<body>
<div class="page-group teach-askleave">
    <div class="page page-current">
        <header class="bar bar-nav">
            <div class="header-l"><a class="ico ico-left" href="tch_index.html"></a></div>
            <div class="header-m">学生考勤</div>
            <div class="header-r"></div>
        </header>
        <div class="content teach-askleave-wrap">
            <!-- <p class="fs-07 tc mt-05 color-gray6">今天</p>
            <div class="card">
                <div class="card-header">
                    <div class="card-l tc">
                        <p class="fs-08">王小龙</p>
                        <p class="fs-06 color-gray6">（000012）</p>
                    </div>
                    <div class="card-d fs-08">请假0.5天</div>
                    <div class="card-r color-danger fs-08">
                        <i class="ico ico-dengdai fs-1-1 mr-02"></i>待确认
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-content-inner">
                        <p class="askleave-info">起止时间：06.13 上午 至06.13 下午</p>
                        <p class="askleave-info">请假事由：生病-肚子痛，需要休息半天，希望老师批准</p>
                    </div>
                </div>
            </div>
            <p class="fs-07 tc mt-05 color-gray6">昨天 2017.06.12</p>
            <div class="card">
                <div class="card-header">
                    <div class="card-l tc">
                        <p class="fs-08">李浩</p>
                        <p class="fs-06 color-gray6">（000012）</p>
                    </div>
                    <div class="card-d fs-08">请假0.5天</div>
                    <div class="card-r color-gray fs-08">
                        <i class="ico ico-renwu1 fs-1-1 mr-02"></i>已确认
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-content-inner">
                        <p class="askleave-info">起止时间：06.13 上午 至06.13 下午</p>
                        <p class="askleave-info">请假事由：生病-肚子痛，需要休息半天，希望老师批准</p>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-l tc">
                        <p class="fs-08">王五四</p>
                        <p class="fs-06 color-gray6">（000012）</p>
                    </div>
                    <div class="card-d fs-08">请假0.5天</div>
                    <div class="card-r color-gray fs-08">
                        <i class="ico ico-renwu1 fs-1-1 mr-02"></i>已确认
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-content-inner">
                        <p class="askleave-info">起止时间：06.13 上午 至06.13 下午</p>
                        <p class="askleave-info">请假事由：生病-肚子痛，需要休息半天，希望老师批准</p>
                    </div>
                </div>
            </div> -->
        </div>
        <!--content end-->
    </div>
</div>
<script src="./app/lib/jquery.min.js" charset="utf-8"></script>
<script src="./app/store/store.min.js" charset="utf-8"></script>
<script src="./app/lib/light7.min.js" charset="utf-8"></script>
<script src="./app/lib/common.js" charset="utf-8"></script>
<script type="text/javascript">


    /* 个人信息 */
    $(document).ready(function(){


            /*考勤清单*/
            $.ajax( {
                url: root_url+"uiAttendance/getClassAttendance?pageNo=1&&pageSize=20",
                success: function( data, textStatus, jqXHR ){
                    if(data.code==1){
                        // console.log(data);
                        // var map = [];
                        // var arr = [];
                        
                        // for (var i = 0; i < data.dataList.length; i++) {
                        //     var n=data.dataList[i]['startDate'];
                        //     if(!map[n]){
                        //         map[n]=n;                                           
                        //     }         
                        // };

                        // for (var i = 0; i < data.dataList.length; i++) {
                        //     var n=data.dataList[i]['startDate'];
                        //     if(map.indexOf(n)==-1){
                        //         map.push(n);                            
                        //     }
                             
                        // };
                        // for(var i=0;i<map.length;i++){
                        // //var arr[i]=new Array();      
                        //       for(var j=1;j<data.dataList.length;j++){
                        //          if(map[i]==data.dataList[j]['startDate']){
                        //             arr[i][j].push(data.dataList[j]);
                        //          }  
                        //         }
                        // }                   
                        // for (var i = 0; i < data.dataList.length; i++) {
                        //     var n=data.dataList[i]['startDate'];
                        //     if(map[n]==n)
                        //     arr[n].push(data.dataList[i]);
                        // };
 
                        // console.log(map);
                        // console.log(arr);
                        $.each(data.dataList, function(index, item) {
    
                                var html = '';
                                var index = Number(index);             
                                html += '<p class="fs-07 tc mt-05 color-gray6">'+item['startDate']+'</p>';
                                html += '<div class="card">';
                                html += '<div class="card-header">';
                                html += '<div class="card-l tc">';
                                html += '<p class="fs-08">'+item['studentName']+'</p>';   
                                html += '<p class="fs-06 color-gray6">（'+item['studentNumber']+'）</p>';   
                                html += '</div>';   
                                html += '<div class="card-d fs-08">请假'+item['timeCount']+'天</div>';   
                                
                                if(item['type']!=1){
                                    html += '<div class="card-r color-gray fs-08">';   
                                    html += '<i class="ico ico-renwu1 fs-1-1 mr-02"></i>已确认';
                                }else{    
                                    html += '<div class="card-r color-danger fs-08">';
                                    html += '<i class="ico ico-dengdai fs-1-1 mr-02"></i>待确认'; 
                                }    
                                html += '</div>';   
                                html += '</div>';   
                                html += '<div class="card-content">';   
                                html += '<div class="card-content-inner">';   
                                html += '<p class="askleave-info">起止时间：'+item['startDate']+item['startTime']+' 至'+item['endDate']+item['endTime']+'</p>';   
                                html += '<p class="askleave-info">请假事由：'+item['remark']+'</p>';   
                                html += '</div>';   
                                html += '</div>';   
                                html += '</div>';   
                                $('.teach-askleave-wrap').append(html);                                    
                        });                                      
                    }else{
                        $.toast(data.msg);
                        return false;
                    }           
                }
            });




    }); 
</script>
</body>
</html>