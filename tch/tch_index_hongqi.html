<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>班级近况</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="./css/light7.min.css">
    <link rel="stylesheet" href="./css/style.css"> 
    <link rel="stylesheet" href="./css/common.css"> 
</head>

<body>
<div class="page-group recentdevelopments">
    <div class="page page-current">
        <header class="bar bar-nav">
            <div class="header-l"><a class="ico ico-left-nolink external" href="tch_index.html"></a></div>
            <div class="header-m">班级近况</div>
            <div class="header-r"><a class="header-link " href="#"> </a></div>
        </header>
        <div class="content">
            <!--个人积分信息-->
            <table class="table table-noborder">
                <tr>
                    <td>
                        <p class="fs-1-1 classname" >五年4班</p>
                        <p class="ptpb-02 headmaster">班主任：刘然</p>
                    </td>
                    <td>
                        <p class=""><i class="ico ico-qizhi color-danger fs-1-2"></i></p>
                        <p class=" color-danger fs-09 ptpb-02 flag"></p>
                    </td>
                    <td>
                        <p class="star">
<!--                             <i class="ico ico-pingfenfill star-get"></i>
                            <i class="ico ico-pingfenfill star-get"></i>
                            <i class="ico ico-pingfenfill star-get"></i>
                            <i class="ico ico-pingfenfill star-get"></i>
                            <i class="ico ico-pingfenfill star-get"></i>
                            <i class="ico ico-pingfenfill color-gray"></i> -->
                        </p>
                        <p class="tc fs-08 mt-03 ptpb-02 honorclass"></p>
                    </td>
                </tr>
            </table>

            <!--五项评比-->
            <div class="l-panel mt-05">
                <div class="panel-title">
                    <div class="panel-title-name">本日扣分<span class="panel-title-subname time1"></span> </div>
                    <div class="developments-title-r"><a class="ico ico-more external" href="tch_index_hongqi_deduct.html"></a></div>
                </div>
                <div class="l-panel-content pb-info-wrap l-flex-jsc">
                    <div class="pb-info-l">
                        <div class="recentdevelopments-kfinfo">
                            <p class="recentdevelopments-kfinfo-num"></p>
                            <p class="recentdevelopments-kfinfo-unit">分</p>
                        </div>
                    </div>
                    <div class="pb-info-r l-list list-row2">
                      <!--   <div class="l-list-item">
                            <span class="pb-info-name">迟到</span>
                            <span class="pb-info-grade">-2</span>
                        </div> -->
                    </div>
                </div>
            </div>

            <!--本周情况-->
            <div class="table-wrap mt-05">
                <div class="developments-title">
                    <div class="developments-title-l">本周情况<span class="developments-l-subtitle time2"></span></div>
                    <div class="developments-title-r"><a class="ico ico-more external" href="tch_index_hongqi_rank.html"></a></div>
                </div>
                <table class="table table-center table-nopadding gt-05">
                    <tr>
                        <th >排名</th>
                        <th >班级</th>
                        <th >一</th>
                        <th >二</th>
                        <th >三</th>
                        <th >四</th>
                        <th > 五</th>
                        <th > 红旗</th>
                    </tr>
                  <!--   <tr>
                        <td class="fs-1-2">5</td>
                        <td>五年5班</td>
                        <td><img src="images/tree-1.png" class="developments-preg-pic"></td>
                        <td><img src="images/tree-2.png" class="developments-preg-pic"></td>
                        <td><img src="images/tree-3.png" class="developments-preg-pic"></td>
                        <td><img src="images/tree-4.png" class="developments-preg-pic"></td>
                        <td><img src="images/tree-5.png" class="developments-preg-pic"></td>
                        <td><i class="ico ico-qizhi color-danger  fs-1-2"></i></td>
                    </tr> -->
                </table>
            </div>

            <!--红旗数排行榜-->
            <div class="table-wrap mt-05">
                <div class="developments-title">
                    <div class="developments-title-l">红旗数排行榜<span class="developments-l-subtitle time3"></span></div>
                    <div class="developments-title-r"><a class="ico ico-more external" href="tch_index_hongqi_flagrank.html"></a></div>
                </div>
                <table class="table table-center table-nopadding rt-05">
                    <tr>
                        <th >排名</th>
                        <th >班级</th>
                        <th >红旗数量</th>
                        <th >荣誉称号</th>
                    </tr>
                    <!-- <tr>
                        <td><i class="ico ico-paiming fs-1-2 color-blue"></i></td>
                        <td>五年2班</td>
                        <td><span class="fs-1-2">24</span>面</td>
                        <td>
                            <p class=" ">
                                <i class="ico ico-star star-get"></i>
                                <i class="ico ico-star star-get"></i>
                                <i class="ico ico-star star-get"></i>
                                <i class="ico ico-star star-get"></i>
                                <i class="ico ico-star star-get"></i>
                                <i class="ico ico-star"></i>
                            </p>
                            <p class="tc fs-08">优秀班</p>
                        </td>
                    </tr> -->
                   
                </table>
            </div>

        </div>
        <!--content end-->
    </div>
</div>
<script src="./app/lib/jquery.min.js" charset="utf-8"></script>
<script src="./app/store/store.min.js" charset="utf-8"></script>
<script src="./app/lib/light7.min.js" charset="utf-8"></script>
<script src="./app/lib/common.js" charset="utf-8"></script>
<script type="text/javascript">


    /* 激励卡 */
    $(document).ready(function(){
            var tchinfo=JSON.parse(store.get("tchinfo"));
            console.log(tchinfo);
            $('.headmaster').text(tchinfo['realName']);
            $('.classname').text('缺少班级');/*缺少班级*/
            var classval = {};
            var classval = JSON.stringify(classval);


            /*概况*/  
            $.ajax( {
                url: root_url+"uiRoleHomepage/getClassHonor",
                success: function( data, textStatus, jqXHR ){
                    if(data.code==1){
                        //console.log(data);
                        $('.honorclass').append(data.returnData['name']);
                        var add =0;
                        $.each(data.dataList,function(index,item){
                            add =add+item['flagAmount'];
                        });
                        $('.flag').append(add);
                        for (var i = 0; i < data.returnData['honorValue']; i++) {
                             $('.star').append('<i class="ico ico-pingfenfill star-get"></i>');
                        };              
                    }else{
                        $.toast(data.msg);
                        return false;
                    }           
                }
            });


            /*红旗班级今日概况*/  
            $.ajax( {
                url: root_url+"uiRoleHomepage/getReportFiveEvaluationStatisticsForDay",
                success: function( data, textStatus, jqXHR ){
                    
                    if(data.code==1){
                       // console.log(data);
                        if(data.dataList.length==0){
                            $('.pb-info-l').hide();
                        }
                        $('.time1').text(data.dataList[0]['date']);                           
                        $('.recentdevelopments-kfinfo-num').text(data.dataList[0]['totalDeductScore']);                  
                    }else{
                        $.toast(data.msg);
                        return false;
                    }           
                }
            });


            /*红旗班级详细信息*/
            $.ajax( {
                url: root_url+"uiRoleHomepage/getFiveEvaluationQuotaResut",
                success: function( data, textStatus, jqXHR ){
                    
                    if(data.code==1){
                        console.log(data);
                        $.each(data.dataList, function(index, item) {
                                var html = '';
                                var index = Number(index);             
                                html += '<div class="l-list-item">';
                                html += '<span class="pb-info-name">'+item['logogram']+'</span>';
                                html += '<span class="pb-info-grade">-'+item['score']+'</span>';   
                                html += '</div>';
                                $('.pb-info-r').append(html);                             
                        });                                    
                      
                    }else{
                        $.toast(data.msg);
                        return false;
                    }           
                }
            });


            /*本年段本周情况5条*/
            $.ajax( {
                url: root_url+"uiActivity/getFiveEvaluationStatisticsForDayList",
                success: function( data, textStatus, jqXHR ){
                    
                    if(data.code==1){  
                        //console.log(data);
                        $('.time2').text('缺少时间');
                        $.each(data.returnData, function(index, item) {
                                var html = '';
                                var index = Number(index);             
                                html += '<tr>';
                                html += '<td class="fs-1-2">'+item['sort']+'</td>';
                                html += '<td>'+item['className']+'</td>';
                                for (var i = 0; i <item['list'].length; i++) {
                                    html += '<td><img src="/images/s'+item['list'][i]['picValue']+'.png" height="20px" class="developments-preg-pic"></td>';
                                };
                            var is=Number(5-item['list'].length);

                            for (var iis=0 ;iis < is; iis++){
                                html += '<td></td>';
                            }
                                if(item['isMyself']==1){
                                    html += '<td><i class="ico ico-qizhi color-danger  fs-1-2"></i></td>';
                                }else{
                                    html += '<td><i class="ico ico-qizhi color-gray  fs-1-2"></i></td>';
                                }
                                html += '</tr>';   
                                $('.gt-05').append(html);                             
                        });                                    
                      
                    }else{
                        $.toast(data.msg);
                        return false;
                    }           
                }
            });


            /*本年级红旗数排行榜5条*/
            $.ajax( {
                url: root_url+"uiActivity/getFiveEvaluationStatisticsForWeekList",
                success: function( data, textStatus, jqXHR ){
                    
                    if(data.code==1){
                        //console.log(data);
                        $('.time3').text('缺少时间');
                        $.each(data.returnData, function(index, item) {
                                var html = '';
                                var index = Number(index);             
                                html += '<tr>';
                                html += '<td>'+item['sort']+'</td>';
                                html += '<td>'+item['className']+'</td>'
                                html += '<td><span class="fs-1-2">缺少数量</span>面</td>'
                                html += '<td>'
                            var images='';
                            for (var i = 0; i < item['honorValue']; i++) {
                                images+='<i class="ico ico-pingfenfill star-get"></i>';
                            };
                            html += '<p class="tc fs-08">'+images+'</p>'
                                html += '<p class="tc fs-08">'+item['honorName']+'</p>'
                                html += '</td>'
                                html += '</td>'
                                html += '</tr>';   
                                $('.rt-05').append(html); 
                                                       
                        });                                    
                      
                    }else{
                        $.toast(data.msg);
                        return false;
                    }           
                }
            });

    }); 
</script>
</body>

</html>